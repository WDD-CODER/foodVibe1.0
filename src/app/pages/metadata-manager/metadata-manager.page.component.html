<div class="metadata-page" dir="rtl">
  <header class="header-section">
    <h1>ניהול הגדרות ליבה (The Brain)</h1>
    <p>שליטה גלובלית על יחידות מידה, אלרגנים וקטגוריות מוצרים</p>
  </header>

  <div class="admin-grid">
    <section class="manager-card">
      <div class="card-title">
        <lucide-icon name="scale" class="text-emerald-600"></lucide-icon>
        <h2>יחידות והמרות (גרם/מ"ל)</h2>
      </div>
      
      <div class="flex flex-col gap-3">
        @for (unit of allUnits_(); track unit) {
          <div class="flex items-center justify-between p-2 rounded hover:bg-slate-50 border border-transparent hover:border-slate-100">
            <span class="font-bold text-slate-700">{{ unit }}</span>
            <input type="number" 
                   [value]="tempUnitRates()[unit]" 
                   (change)="updateUnitRate(unit, $event)"
                   class="w-24 text-center border rounded-md px-2 py-1 font-mono focus:ring-2 focus:ring-emerald-500 outline-none">
          </div>
        }
      </div>
    </section>

    <section class="manager-card">
      <div class="card-title">
        <lucide-icon name="alert-triangle" class="text-rose-500"></lucide-icon>
        <h2>מאגר אלרגנים גלובלי</h2>
      </div>

      <div class="input-group">
        <input #allergenInput type="text" placeholder="שם אלרגן...">
        <button (click)="addAllergen(allergenInput.value); allergenInput.value = ''" 
                class="bg-slate-900 text-white px-4 py-2 rounded-lg hover:bg-slate-800 transition-colors">
          הוסף
        </button>
      </div>

      <div class="flex flex-wrap gap-2 mt-4">
        @for (allergen of allAllergens_(); track allergen) {
          <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-rose-50 border border-rose-200 text-rose-700 text-sm font-medium">
            {{ allergen }}
            <button (click)="removeAllergen(allergen)" class="hover:text-rose-900">
              <lucide-icon name="x" size="14"></lucide-icon>
            </button>
          </span>
        }
      </div>
    </section>

    <section class="manager-card">
      <div class="card-title text-indigo-600">
        <lucide-icon name="tag" size="20"></lucide-icon>
        <h2 class="text-slate-800">קטגוריות מוצרים</h2>
      </div>
      <div class="flex flex-col gap-2">
        @for (category of allCategories_(); track category) {
          <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
            <span class="font-medium">{{ category }}</span>
            <lucide-icon name="chevron-left" size="16" class="text-slate-400"></lucide-icon>
          </div>
        }
      </div>
    </section>
  </div>
</div>